<html>
<body>
    <table border="1" id="table1">
        <thead>
            <tr><!-- 메타데이터 : 제목 //  -->
                <th date-field="name">이름</th>
                <th date-field="address">주소</th>
                <th date-field="regDate">가입일</th>
                <th date-field="gender">성별</th>
                <th date-field="id">아이디</th>
                <th date-field="btn">유저삭제</th>
                <th date-field="btnModify">유저수정</th>
            </tr>
        </thead>    
        <tbody id="tb1">
            <!-- <tr>
            <td>이수미</td>
            <td>서울</td>
            <td>여자</td>
            <td>redfila</td>
            <td>2017-09-24</td>
            <td><button type="button" value="삭제">삭제</button></td>
        </tr> -->
        </tbody>
        
    </table>
    <div id="nodeDiv"></div>
    <script>
        var tableObj=
        document.getElementById("table1");//get ElementById, getElementByName - 노드를 가져오는 아이들
        //alert(tableObj.getAttribute("id"));
        var nodes = tableObj.childNodes;
        var divObj = document.getElementById("nodeDiv");
        var thObj = nodes[1].childNodes;
        var trObj = thObj[1].childNodes;
        var keyStrs = new Array();

        for(var i=0;i<trObj.length;i++){
            var tro = trObj[i];
            try{//예외 처리(try,catch)
                if(tro.getAttribute("date-field") != null){
                    keyStrs[keyStrs.length] = tro.getAttribute("date-field");
                }
            }catch(e){

            }
            //divObj.innerHTML += trObj[i];//첫번째 레벨 노드만 나온다.
        }

        divObj.innerHTML = keyStrs;

        var tbList = {};//구조체를 만들겠다 선언 - 키벨류 6개를 가지고 있는 구조체
        //
        tbList["name"] = "leesumi";//키,벨류로 구성된 맵구조
        tbList["address"]= "seoul";
        tbList["gender"]="female";
        tbList["id"] = "leesumi";
        tbList["regDate"] = "2017-09-24";
        tbList["btn"] = "<input type='button' value='삭제' date-func ='delet'></input>";
        tbList["btnModify"] = "<input type='button' value='수정' date-func ='modify'></input>";
        var tblStr="";

        tblStr +="<tr>"
        for(var i=0,max=keyStrs.length;i<max;i++){
            tblStr += "<td>"+ tbList[keyStrs[i]] +"</td>";
        }
        tblStr +="</tr>"

        //var tbObj = 

        // tblStr += "<tr>";
        // tblStr += "<td>"+tbList["name"] +"</td>";
        // tblStr += "<td>"+tbList["address"] +"</td>";
        // tblStr += "<td>"+tbList["gender"] +"</td>";
        // tblStr += "<td>"+tbList["id"] +"</td>";
        // tblStr += "<td>"+tbList["regDate"] +"</td>";
        // tblStr += "<td>"+tbList["btn"] +"</td>";    
        // tblStr += "</tr>";

        var tbObj = document.getElementById("tb1");
        
        var inputObj = document.getElementsByTagName("input");
        var testFuc = function(){
            alert("테스트입니다.");
        }
        tbObj.innerHTML = tblStr;//화면에 뿌려주라. 화면에 뿌려줘야 이벤트를 실행할 수 있다. 순서가 중요하다.!

        for(var i=0,max=inputObj.length;i<max;i++){
            var iObj = inputObj[i];
            if(iObj.getAttribute("type")=="button"){//type이 button일 경우
                iObj.onclick=function(){
                   // alert(this.value);//this는 iObj,화면 디자인 값을 가지고 분기하지 말아라!
                   if(this.getAttribute("date-func")=='delet'){
                        alert("삭제버튼클릭")
                   }else if(this.getAttribute("date-func")=='modify'){
                        alert("수정버튼 클릭");
                   }
                }
            }
        }

        //자료구조(리스트,맵)

        //list - 숫자(index) :   키를 지정해줄 수 없는것.
        //키에대한 데이터타입을 지정할 수 없다. 그래서 게시판같은데서 사용함.
        //

        //map - 키 : 밸류 키를 지정해줄수 있는것
        //set이라는 데이터타입 리스트 - 밸류값의 중복이 허용되지 않는다.


        //
    </script>
</body>
</html>